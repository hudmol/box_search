<%= setup_context(:title => I18n.t("plugins.box_search.label")) %>

<link href="<%= "#{AppConfig[:frontend_prefix]}assets/box_search.css" %>" media="all" rel="stylesheet" type="text/css"/>

<%
  form_target = {:controller => :box_search, :action => :search} if form_target.nil?
%>
<div class="row-fluid">
  <div class="span6">
    <%= form_tag(form_target, {:class => "form-horizontal", :id => "box_search_form"}) do |f| %>
      <h1><%= I18n.t "plugins.box_search.label" %></h1>
      <div class="control-group">
        <label class="control-label" for="indicator"><%= I18n.t("plugins.box_search.indicator_label") %></label>
        <div class="controls">
          <%= text_field_tag "indicator", params["indicator"], :style => "width: 100%;", :class => "box-search-field" %>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="collection_resource"><%= I18n.t("top_container._frontend.bulk_operations.collection_resource_singular") %></label>
        <div class="controls">
          <%= render_aspace_partial :partial => "top_containers/bulk_operations/collection_resource_linker" %>
        </div>
      </div>
      <div class="control-group">
        <div class="controls">
          <%= submit_tag I18n.t("plugins.box_search.go"), :class => "btn btn-primary pull-right" %>
        </div>
      </div>
    <% end %>
  </div>
</div>

<div class="row-fluid">
  <div class="span12">
    <div id="box_search_results" class="record-pane">
      <div id="alertBucket" class="alert alert-info">
        <%= I18n.t("plugins.box_search.help_message") %>
      </div>
    </div>
  </div>
</div>


<div id="template_box_search_results"><!--
--></div>
<div id="template_box_search_error_message"><!--
  <div id="alertBucket" class="alert alert-error">
    ${message}
  </div>
--></div>

<script src="<%= "#{AppConfig[:frontend_prefix]}assets/box_search.js" %>"></script>
